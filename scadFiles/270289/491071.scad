// Customizable Chalice Lathe
// preview[tilt:side]

// Click "Clear" below to erase the default design. Then click and drag to draw. For best results, draw a polygon that overlaps the top, bottom, and left edges; avoid steep overhangs. See the screencast in the thing description for an example.
sketch = [[[-0.050684931506849315,0.46164383561643835],[-0.04246575342465753,0.44794520547945205],[-0.03972602739726028,0.43424657534246575],[-0.03972602739726028,0.42054794520547945],[-0.03972602739726028,0.40684931506849314],[-0.045205479452054796,0.39315068493150684],[-0.050684931506849315,0.37945205479452054],[-0.056164383561643834,0.36575342465753424],[-0.06164383561643835,0.35205479452054794],[-0.06986301369863014,0.33835616438356164],[-0.07808219178082192,0.3273972602739726],[-0.0863013698630137,0.31643835616438354],[-0.09726027397260274,0.3082191780821918],[-0.10821917808219178,0.3],[-0.11643835616438356,0.28904109589041094],[-0.12465753424657534,0.27534246575342464],[-0.13013698630136986,0.26164383561643834],[-0.13013698630136986,0.24794520547945206],[-0.13013698630136986,0.23424657534246576],[-0.13835616438356163,0.2232876712328767],[-0.14931506849315068,0.21232876712328766],[-0.16027397260273973,0.20136986301369864],[-0.17123287671232876,0.19315068493150686],[-0.17945205479452056,0.1821917808219178],[-0.18767123287671234,0.17123287671232876],[-0.1958904109589041,0.16027397260273973],[-0.20684931506849316,0.14931506849315068],[-0.21780821917808219,0.13835616438356163],[-0.22602739726027396,0.1273972602739726],[-0.23424657534246576,0.11643835616438356],[-0.24246575342465754,0.10547945205479452],[-0.2452054794520548,0.09178082191780822],[-0.25068493150684934,0.07808219178082192],[-0.2534246575342466,0.06438356164383562],[-0.2534246575342466,0.050684931506849315],[-0.2534246575342466,0.036986301369863014],[-0.2534246575342466,0.023287671232876714],[-0.2534246575342466,0.009589041095890411],[-0.26164383561643834,-0.0013698630136986301],[-0.2671232876712329,-0.015068493150684932],[-0.27534246575342464,-0.026027397260273973],[-0.28356164383561644,-0.036986301369863014],[-0.29178082191780824,-0.050684931506849315],[-0.3,-0.06164383561643835],[-0.30547945205479454,-0.07534246575342465],[-0.3136986301369863,-0.0863013698630137],[-0.31917808219178084,-0.1],[-0.3219178082191781,-0.1136986301369863],[-0.31643835616438354,-0.1273972602739726],[-0.3082191780821918,-0.13835616438356163],[-0.29726027397260274,-0.14657534246575343],[-0.2863013698630137,-0.1547945205479452],[-0.29178082191780824,-0.1684931506849315],[-0.3,-0.17945205479452056],[-0.30273972602739724,-0.19315068493150686],[-0.3,-0.20684931506849316],[-0.3,-0.22054794520547946],[-0.30547945205479454,-0.23424657534246576],[-0.3,-0.24794520547945206],[-0.28904109589041094,-0.25616438356164384],[-0.2808219178082192,-0.2671232876712329],[-0.2863013698630137,-0.2808219178082192],[-0.2945205479452055,-0.29178082191780824],[-0.30273972602739724,-0.30273972602739724],[-0.30547945205479454,-0.31643835616438354],[-0.3082191780821918,-0.33013698630136984],[-0.30547945205479454,-0.34383561643835614],[-0.3,-0.35753424657534244],[-0.28904109589041094,-0.36575342465753424],[-0.27808219178082194,-0.37397260273972605],[-0.2671232876712329,-0.38493150684931504],[-0.25616438356164384,-0.39315068493150684],[-0.2452054794520548,-0.40136986301369865],[-0.23424657534246576,-0.4095890410958904],[-0.2232876712328767,-0.4178082191780822],[-0.21232876712328766,-0.426027397260274],[-0.20136986301369864,-0.43424657534246575],[-0.19041095890410958,-0.4452054794520548],[-0.19041095890410958,-0.4589041095890411],[-0.18767123287671234,-0.4726027397260274],[-0.17945205479452056,-0.4863013698630137],[-0.17123287671232876,-0.49726027397260275],[-0.1684931506849315,-0.510958904109589],[-0.17123287671232876,-0.5246575342465754],[-0.17671232876712328,-0.5383561643835616],[-0.1821917808219178,-0.552054794520548],[-0.19863013698630136,-0.5493150684931507],[-0.21232876712328766,-0.541095890410959],[-0.22602739726027396,-0.541095890410959],[-0.23972602739726026,-0.5465753424657535],[-0.25068493150684934,-0.5547945205479452],[-0.26164383561643834,-0.563013698630137],[-0.27808219178082194,-0.5712328767123288],[-0.2945205479452055,-0.5794520547945206],[-0.31643835616438354,-0.5931506849315068],[-0.33013698630136984,-0.6013698630136987],[-0.3410958904109589,-0.6095890410958904],[-0.36027397260273974,-0.6205479452054794],[-0.3767123287671233,-0.6287671232876713],[-0.3904109589041096,-0.6315068493150685],[-0.4041095890410959,-0.6315068493150685],[-0.4232876712328767,-0.626027397260274],[-0.436986301369863,-0.626027397260274],[-0.4506849315068493,-0.626027397260274],[-0.4671232876712329,-0.6287671232876713],[-0.4808219178082192,-0.6315068493150685],[-0.4945205479452055,-0.6315068493150685],[-0.510958904109589,-0.6315068493150685],[-0.5301369863013699,-0.6287671232876713],[-0.5465753424657535,-0.626027397260274],[-0.5602739726027397,-0.6232876712328768],[-0.5767123287671233,-0.6205479452054794],[-0.5904109589041096,-0.6150684931506849],[-0.6041095890410959,-0.6068493150684932],[-0.6178082191780822,-0.5958904109589042],[-0.6342465753424658,-0.5821917808219178],[-0.6452054794520548,-0.5739726027397261],[-0.6643835616438356,-0.5602739726027397],[-0.6808219178082192,-0.5438356164383562],[-0.6945205479452055,-0.5273972602739726],[-0.7027397260273973,-0.5164383561643836],[-0.7109589041095891,-0.5054794520547945],[-0.7191780821917808,-0.4945205479452055],[-0.7273972602739726,-0.4808219178082192],[-0.7356164383561644,-0.4671232876712329],[-0.7438356164383562,-0.4506849315068493],[-0.7493150684931507,-0.436986301369863],[-0.7547945205479452,-0.42054794520547945],[-0.7547945205479452,-0.4041095890410959],[-0.7547945205479452,-0.38767123287671235],[-0.7547945205479452,-0.37397260273972605],[-0.7547945205479452,-0.36027397260273974],[-0.7547945205479452,-0.34657534246575344],[-0.7547945205479452,-0.33287671232876714],[-0.7547945205479452,-0.31917808219178084],[-0.7547945205479452,-0.30547945205479454],[-0.7547945205479452,-0.28904109589041094],[-0.7547945205479452,-0.27534246575342464],[-0.7547945205479452,-0.26164383561643834],[-0.7547945205479452,-0.24794520547945206],[-0.7547945205479452,-0.23424657534246576],[-0.7547945205479452,-0.21232876712328766],[-0.7547945205479452,-0.19863013698630136],[-0.7547945205479452,-0.17397260273972603],[-0.7547945205479452,-0.15753424657534246],[-0.7547945205479452,-0.1410958904109589],[-0.7547945205479452,-0.1273972602739726],[-0.7547945205479452,-0.10273972602739725],[-0.7547945205479452,-0.08082191780821918],[-0.7547945205479452,-0.056164383561643834],[-0.7547945205479452,-0.04246575342465753],[-0.7547945205479452,-0.028767123287671233],[-0.7547945205479452,-0.012328767123287671],[-0.7547945205479452,0.0013698630136986301],[-0.7547945205479452,0.015068493150684932],[-0.7547945205479452,0.03424657534246575],[-0.7547945205479452,0.050684931506849315],[-0.7547945205479452,0.06438356164383562],[-0.7547945205479452,0.08082191780821918],[-0.7547945205479452,0.09726027397260274],[-0.7547945205479452,0.11643835616438356],[-0.7547945205479452,0.13287671232876713],[-0.7547945205479452,0.15205479452054796],[-0.7547945205479452,0.17671232876712328],[-0.7547945205479452,0.19315068493150686],[-0.7547945205479452,0.20684931506849316],[-0.7547945205479452,0.22054794520547946],[-0.7547945205479452,0.23424657534246576],[-0.7547945205479452,0.24794520547945206],[-0.7547945205479452,0.2726027397260274],[-0.7547945205479452,0.29726027397260274],[-0.7547945205479452,0.3219178082191781],[-0.7547945205479452,0.34383561643835614],[-0.7547945205479452,0.363013698630137],[-0.7547945205479452,0.3821917808219178],[-0.7547945205479452,0.40136986301369865],[-0.7547945205479452,0.4232876712328767],[-0.7547945205479452,0.4397260273972603],[-0.7547945205479452,0.4534246575342466],[-0.7547945205479452,0.46986301369863015],[-0.7547945205479452,0.48356164383561645],[-0.7547945205479452,0.49726027397260275],[-0.7547945205479452,0.510958904109589],[-0.7547945205479452,0.5273972602739726],[-0.7547945205479452,0.541095890410959],[-0.7547945205479452,0.5575342465753425],[-0.7547945205479452,0.5739726027397261],[-0.7547945205479452,0.5876712328767123],[-0.7520547945205479,0.6041095890410959],[-0.7410958904109589,0.6178082191780822],[-0.7301369863013699,0.626027397260274],[-0.7082191780821918,0.6424657534246575],[-0.6972602739726027,0.6506849315068494],[-0.6835616438356165,0.6589041095890411],[-0.6698630136986301,0.6671232876712329],[-0.6561643835616439,0.6753424657534246],[-0.6424657534246575,0.6835616438356165],[-0.626027397260274,0.6917808219178082],[-0.6123287671232877,0.7],[-0.5986301369863014,0.7054794520547946],[-0.584931506849315,0.7109589041095891],[-0.5684931506849316,0.7164383561643836],[-0.5383561643835616,0.7246575342465753],[-0.5246575342465754,0.7273972602739726],[-0.510958904109589,0.7301369863013699],[-0.4945205479452055,0.7301369863013699],[-0.4780821917808219,0.7328767123287672],[-0.4643835616438356,0.7328767123287672],[-0.4506849315068493,0.7356164383561644],[-0.436986301369863,0.7356164383561644],[-0.4232876712328767,0.7356164383561644],[-0.39863013698630134,0.7383561643835617],[-0.3767123287671233,0.7383561643835617],[-0.363013698630137,0.7383561643835617],[-0.3410958904109589,0.7328767123287672],[-0.31643835616438354,0.7246575342465753],[-0.2945205479452055,0.7164383561643836],[-0.2808219178082192,0.7136986301369863],[-0.2808219178082192,0.7136986301369863],[-0.25616438356164384,0.7082191780821918],[-0.236986301369863,0.7027397260273973],[-0.22054794520547946,0.6945205479452055],[-0.20410958904109588,0.689041095890411],[-0.18493150684931506,0.6808219178082192],[-0.16575342465753426,0.6753424657534246],[-0.15205479452054796,0.6698630136986301],[-0.13835616438356163,0.6671232876712329],[-0.12465753424657534,0.6616438356164384],[-0.10821917808219178,0.6534246575342466],[-0.09452054794520548,0.6424657534246575],[-0.0863013698630137,0.6315068493150685],[-0.07534246575342465,0.6205479452054794],[-0.06438356164383562,0.6095890410958904],[-0.05342465753424658,0.6013698630136987],[-0.04246575342465753,0.5904109589041096],[-0.04246575342465753,0.5904109589041096],[-0.031506849315068496,0.5794520547945206],[-0.028767123287671233,0.5657534246575342],[-0.04246575342465753,0.5657534246575342]],[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238]]]; // [draw_polygon]

// Treat which edge of the sketch as the lathe axis?
lathe_edge = 0; // [0:Left, 1:Right]

// Height of the sketch box (mm). Object height may be less if sketch does not span full vertical extent of sketch box.
sketch_height = 100;

// Width of the sketch box (mm). Maximum radius of object. Object radius may be less if sketch does not span full horizontal extent of box.
sketch_width = 100;

// Lower segment counts yield a faceted column appearance.
lathe_segments = 90;

// 6. Shift up to rest on Z 0.
translate([0, 0, sketch_height/2])

// 5. Scale lathed object from unit size to final dimensions.
scale([sketch_width, sketch_width, sketch_height])

// 4. Spin the clipped profile polygon around the axis to get the "lathed" object. 
rotate_extrude($fn=lathe_segments)

// 3. Shift the clipped profile polygon so the left edge is aligned with the axis.
translate([0.5, 0, 0])

// 2. Convert the clipped profile back to a 2D polygon (1x1, centered on origin).
projection(cut=false)

// 1. Clip the profile sketch, as a solid, to the allowed 1x1 extent.
intersection() {
	
	// The profile drawn by the user, extruded.
	mirror([lathe_edge == 1 ? 1 : 0, 0, 0])	
	linear_extrude(height=1, center=true)
	polygon(points=sketch[0], paths=sketch[1]);
	
	// This unit cube is the allowed extent of the sketch.
	cube([1, 1, 1], center=true);
}
