// Pattern Bracelet
// By Jim DeVona

// Minimum inner diameter of bracelet (mm). Actual inner and outer diameters depend on pattern settings.
inner_diameter = 55; // [40:80]

// Height of bracelet (mm).
height = 10;

// Draw a single pattern to work into the edge of the bracelet. Avoid self-intersecting shapes.
pattern = [[[-0.03972602739726028,-0.1703767123287671],[-0.04794520547945205,-0.18133561643835616],[-0.056164383561643834,-0.1922945205479452],[-0.06712328767123288,-0.20325342465753424],[-0.07808219178082192,-0.2142123287671233],[-0.08904109589041095,-0.22243150684931506],[-0.10273972602739725,-0.23065068493150684],[-0.1136986301369863,-0.23886986301369864],[-0.12465753424657534,-0.24708904109589042],[-0.13835616438356163,-0.2525684931506849],[-0.15205479452054796,-0.25804794520547947],[-0.16301369863013698,-0.2662671232876712],[-0.17671232876712328,-0.27174657534246577],[-0.19315068493150686,-0.274486301369863],[-0.20684931506849316,-0.27722602739726027],[-0.22054794520547946,-0.2799657534246575],[-0.23424657534246576,-0.28544520547945207],[-0.24794520547945206,-0.28544520547945207],[-0.26164383561643834,-0.28544520547945207],[-0.27534246575342464,-0.28544520547945207],[-0.28904109589041094,-0.28544520547945207],[-0.30273972602739724,-0.28544520547945207],[-0.31643835616438354,-0.28544520547945207],[-0.33013698630136984,-0.2799657534246575],[-0.34383561643835614,-0.274486301369863],[-0.3547945205479452,-0.2662671232876712],[-0.36575342465753424,-0.2553082191780822],[-0.37397260273972605,-0.2416095890410959],[-0.37945205479452054,-0.22517123287671234],[-0.38493150684931504,-0.21147260273972604],[-0.3904109589041096,-0.19777397260273974],[-0.3904109589041096,-0.1840753424657534],[-0.3904109589041096,-0.1703767123287671],[-0.39315068493150684,-0.1566780821917808],[-0.39315068493150684,-0.1429794520547945],[-0.39315068493150684,-0.1292808219178082],[-0.39315068493150684,-0.11558219178082192],[-0.39315068493150684,-0.09914383561643836],[-0.39315068493150684,-0.0827054794520548],[-0.39315068493150684,-0.0690068493150685],[-0.39315068493150684,-0.05256849315068493],[-0.3904109589041096,-0.03886986301369863],[-0.38767123287671235,-0.02517123287671233],[-0.3821917808219178,-0.011472602739726027],[-0.37397260273972605,0.002226027397260274],[-0.3684931506849315,0.015924657534246576],[-0.36027397260273974,0.026883561643835617],[-0.35205479452054794,0.037842465753424655],[-0.3410958904109589,0.0488013698630137],[-0.33013698630136984,0.05976027397260274],[-0.31917808219178084,0.06797945205479453],[-0.3082191780821918,0.0761986301369863],[-0.2945205479452055,0.08167808219178083],[-0.2808219178082192,0.0898972602739726],[-0.2671232876712329,0.0898972602739726],[-0.2534246575342466,0.09263698630136986],[-0.23972602739726026,0.09263698630136986],[-0.22602739726027396,0.09263698630136986],[-0.21232876712328766,0.09537671232876713],[-0.19863013698630136,0.09811643835616439],[-0.18493150684931506,0.09811643835616439],[-0.17123287671232876,0.09811643835616439],[-0.1547945205479452,0.10085616438356164],[-0.1410958904109589,0.10085616438356164],[-0.12465753424657534,0.09811643835616439],[-0.12465753424657534,0.09811643835616439],[-0.11095890410958904,0.09537671232876713],[-0.11095890410958904,0.09537671232876713],[-0.09726027397260274,0.09263698630136986],[-0.0863013698630137,0.08441780821917808],[-0.07534246575342465,0.0761986301369863],[-0.06438356164383562,0.06797945205479453],[-0.06986301369863014,0.08167808219178083],[-0.07808219178082192,0.09537671232876713],[-0.0863013698630137,0.10633561643835616],[-0.09452054794520548,0.12003424657534247],[-0.1,0.13373287671232878],[-0.10547945205479452,0.14743150684931508],[-0.10821917808219178,0.16113013698630138],[-0.11095890410958904,0.17482876712328768],[-0.11643835616438356,0.18852739726027398],[-0.11917808219178082,0.20222602739726028],[-0.11917808219178082,0.21592465753424658],[-0.11917808219178082,0.22962328767123288],[-0.11917808219178082,0.24332191780821918],[-0.11917808219178082,0.25976027397260276],[-0.11917808219178082,0.2761986301369863],[-0.11917808219178082,0.2898972602739726],[-0.1136986301369863,0.3035958904109589],[-0.10821917808219178,0.3172945205479452],[-0.10273972602739725,0.3309931506849315],[-0.09452054794520548,0.34195205479452057],[-0.0863013698630137,0.35291095890410956],[-0.07808219178082192,0.3638698630136986],[-0.06438356164383562,0.3720890410958904],[-0.050684931506849315,0.3803082191780822],[-0.03972602739726028,0.3912671232876712],[-0.026027397260273973,0.39674657534246577],[-0.012328767123287671,0.399486301369863],[0.0013698630136986301,0.40222602739726027],[0.015068493150684932,0.4077054794520548],[0.028767123287671233,0.41044520547945207],[0.04246575342465753,0.41592465753424657],[0.0589041095890411,0.41592465753424657],[0.07260273972602739,0.4186643835616438],[0.08904109589041095,0.4186643835616438],[0.10273972602739725,0.4186643835616438],[0.11643835616438356,0.4186643835616438],[0.13013698630136986,0.4186643835616438],[0.14383561643835616,0.4131849315068493],[0.1547945205479452,0.4049657534246575],[0.1684931506849315,0.399486301369863],[0.1821917808219178,0.3912671232876712],[0.19315068493150686,0.38304794520547947],[0.20684931506849316,0.3720890410958904],[0.21780821917808219,0.36113013698630136],[0.22876712328767124,0.3501712328767123],[0.236986301369863,0.33921232876712326],[0.24794520547945206,0.32825342465753427],[0.25616438356164384,0.31455479452054796],[0.26438356164383564,0.30085616438356166],[0.26986301369863014,0.28715753424657536],[0.2726027397260274,0.27071917808219176],[0.27534246575342464,0.25702054794520546],[0.27534246575342464,0.2405821917808219],[0.27534246575342464,0.2268835616438356],[0.27534246575342464,0.2268835616438356],[0.2726027397260274,0.2131849315068493],[0.2726027397260274,0.2131849315068493],[0.26986301369863014,0.199486301369863],[0.26438356164383564,0.1857876712328767],[0.26438356164383564,0.1857876712328767],[0.26164383561643834,0.1720890410958904],[0.25616438356164384,0.1583904109589041],[0.25068493150684934,0.1446917808219178],[0.25068493150684934,0.1446917808219178],[0.24794520547945206,0.1309931506849315],[0.236986301369863,0.12003424657534247],[0.2232876712328767,0.10907534246575343],[0.21232876712328766,0.10085616438356164],[0.20136986301369864,0.09263698630136986],[0.19041095890410958,0.08441780821917808],[0.20410958904109588,0.08441780821917808],[0.2232876712328767,0.08715753424657534],[0.236986301369863,0.08715753424657534],[0.25068493150684934,0.0898972602739726],[0.26438356164383564,0.0898972602739726],[0.27808219178082194,0.09263698630136986],[0.29178082191780824,0.09263698630136986],[0.30547945205479454,0.09263698630136986],[0.31917808219178084,0.09263698630136986],[0.33287671232876714,0.08715753424657534],[0.34657534246575344,0.08167808219178083],[0.36027397260273974,0.0761986301369863],[0.3767123287671233,0.06797945205479453],[0.3904109589041096,0.05702054794520548],[0.40136986301369865,0.046061643835616436],[0.4123287671232877,0.0351027397260274],[0.42054794520547945,0.024143835616438358],[0.4315068493150685,0.010445205479452055],[0.44246575342465755,-0.0059931506849315065],[0.4506849315068493,-0.019691780821917807],[0.45616438356164385,-0.03339041095890411],[0.46164383561643835,-0.04708904109589041],[0.4643835616438356,-0.06078767123287671],[0.46986301369863015,-0.07722602739726027],[0.4726027397260274,-0.09092465753424657],[0.4726027397260274,-0.10462328767123287],[0.4726027397260274,-0.11832191780821918],[0.4726027397260274,-0.13202054794520549],[0.4726027397260274,-0.14571917808219179],[0.4726027397260274,-0.14571917808219179],[0.46986301369863015,-0.16215753424657534],[0.46986301369863015,-0.16215753424657534],[0.4671232876712329,-0.17585616438356164],[0.4671232876712329,-0.17585616438356164],[0.4643835616438356,-0.18955479452054794],[0.4643835616438356,-0.18955479452054794],[0.4643835616438356,-0.20325342465753424],[0.4643835616438356,-0.20325342465753424],[0.46164383561643835,-0.21695205479452054],[0.46164383561643835,-0.21695205479452054],[0.45616438356164385,-0.23339041095890412],[0.45616438356164385,-0.23339041095890412],[0.4506849315068493,-0.24982876712328766],[0.4506849315068493,-0.24982876712328766],[0.44246575342465755,-0.2607876712328767],[0.44246575342465755,-0.2607876712328767],[0.43424657534246575,-0.27174657534246577],[0.43424657534246575,-0.27174657534246577],[0.4232876712328767,-0.2827054794520548],[0.4232876712328767,-0.2827054794520548],[0.4095890410958904,-0.29092465753424657],[0.39863013698630134,-0.3018835616438356],[0.38493150684931504,-0.3073630136986301],[0.37123287671232874,-0.3155821917808219],[0.35753424657534244,-0.3238013698630137],[0.34383561643835614,-0.32654109589041097],[0.33013698630136984,-0.3292808219178082],[0.31095890410958904,-0.3347602739726027],[0.29726027397260274,-0.34023972602739727],[0.28356164383561644,-0.34023972602739727],[0.26986301369863014,-0.34023972602739727],[0.25616438356164384,-0.34023972602739727],[0.24246575342465754,-0.34023972602739727],[0.22876712328767124,-0.3347602739726027],[0.21506849315068494,-0.3292808219178082],[0.20136986301369864,-0.32654109589041097],[0.18767123287671234,-0.31832191780821917],[0.17123287671232876,-0.31284246575342467],[0.16027397260273973,-0.30462328767123287],[0.14931506849315068,-0.2964041095890411],[0.1410958904109589,-0.28544520547945207],[0.13013698630136986,-0.274486301369863],[0.12191780821917808,-0.26352739726027397],[0.1136986301369863,-0.24982876712328766],[0.10821917808219178,-0.23613013698630136],[0.10273972602739725,-0.21969178082191781],[0.10273972602739725,-0.21969178082191781],[0.10273972602739725,-0.23339041095890412],[0.10273972602739725,-0.24708904109589042],[0.10273972602739725,-0.26352739726027397],[0.10273972602739725,-0.2799657534246575],[0.1,-0.2936643835616438],[0.1,-0.3073630136986301],[0.09726027397260274,-0.3210616438356164],[0.09726027397260274,-0.3347602739726027],[0.09726027397260274,-0.348458904109589],[0.10273972602739725,-0.3648972602739726],[0.10821917808219178,-0.3785958904109589],[0.11643835616438356,-0.3895547945205479],[0.12465753424657534,-0.40051369863013697],[0.13287671232876713,-0.4169520547945205],[0.14383561643835616,-0.4251712328767123],[0.15205479452054796,-0.4388698630136986],[0.16575342465753426,-0.4525684931506849],[0.17397260273972603,-0.463527397260274],[0.1821917808219178,-0.4772260273972603],[0.19041095890410958,-0.48818493150684933],[0.19863013698630136,-0.4991438356164384],[0.1958904109589041,-0.5128424657534246],[0.1821917808219178,-0.5238013698630137],[0.1684931506849315,-0.526541095890411],[0.1547945205479452,-0.5292808219178082],[0.13835616438356163,-0.5347602739726027],[0.12465753424657534,-0.5375],[0.11095890410958904,-0.5402397260273972],[0.09726027397260274,-0.5429794520547945],[0.08082191780821918,-0.5484589041095891],[0.06712328767123288,-0.5539383561643836],[0.05342465753424658,-0.5566780821917808],[0.03972602739726028,-0.5566780821917808],[0.03972602739726028,-0.5566780821917808],[0.026027397260273973,-0.5511986301369863],[0.01780821917808219,-0.5347602739726027],[0.01780821917808219,-0.5347602739726027],[0.009589041095890411,-0.5210616438356165],[0.0013698630136986301,-0.5046232876712329],[0.0013698630136986301,-0.5046232876712329],[-0.00684931506849315,-0.4909246575342466],[-0.00684931506849315,-0.4909246575342466],[-0.015068493150684932,-0.4799657534246575],[-0.02054794520547945,-0.4662671232876712],[-0.026027397260273973,-0.4498287671232877],[-0.028767123287671233,-0.4361301369863014],[-0.028767123287671233,-0.4196917808219178],[-0.028767123287671233,-0.4059931506849315],[-0.03424657534246575,-0.3922945205479452],[-0.03972602739726028,-0.3785958904109589],[-0.045205479452054796,-0.3648972602739726],[-0.045205479452054796,-0.3511986301369863],[-0.04794520547945205,-0.3375],[-0.04794520547945205,-0.3238013698630137],[-0.04794520547945205,-0.3101027397260274],[-0.045205479452054796,-0.2964041095890411],[-0.045205479452054796,-0.2827054794520548],[-0.045205479452054796,-0.2827054794520548],[-0.04246575342465753,-0.2690068493150685],[-0.04246575342465753,-0.2553082191780822],[-0.04246575342465753,-0.2416095890410959],[-0.04246575342465753,-0.2279109589041096],[-0.03972602739726028,-0.2142123287671233],[-0.03972602739726028,-0.2142123287671233],[-0.03424657534246575,-0.200513698630137],[-0.03424657534246575,-0.200513698630137],[-0.028767123287671233,-0.1868150684931507],[-0.028767123287671233,-0.1868150684931507],[-0.026027397260273973,-0.1731164383561644],[-0.03424657534246575,-0.15393835616438356]],[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288]]]; // [draw_polygon]

// Size of pattern box (mm per side).
pattern_size = 10; // [5:20]

// Pattern orientation (degrees). Adjust clip and rotation to ensure pattern openings intersect outer edge of bracelet.
pattern_rotation = 180; // [0:360]

// Clip pattern this far from bottom (%). Applied after rotation.
pattern_clip = 95; // [0:100]

// For maximum bracelet flexibility, increase copies as much as possible without overlap.
pattern_copies = 20;

inner_radius = inner_diameter/2;

difference() {
	
	// Bracelet stock
	cylinder(
			h = height,
			r = inner_radius + (pattern_size * pattern_clip / 100),
			center = true,
			$fn = 180);
	
	// Cut patterns from periphery of the stock
	for (i = [0 : pattern_copies - 1]) {
		rotate([0, 0, i * 360 / pattern_copies])
		translate([0, inner_radius + pattern_size/2, 0])
		pattern_instance();
	}
}

module pattern_instance() {
	scale([pattern_size, pattern_size, 1])
	rotate([0, 0, pattern_rotation])
	linear_extrude(height = height + 1, center = true)
	polygon(points = pattern[0], paths = pattern[1]);
}
