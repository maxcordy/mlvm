//Select Type of Print
Type=1; // [0:Straight Chain,1:Closed Loop]
//Select number of links
Links=11; // [1:100]
//Thickness of Chain Links
T=1;
//Scale of Chain Link (approx mm end to end)
Scale=30;

module Shamrock(h){
  scale([25.4/90, -25.4/90, 1]) union()
  {
    linear_extrude(height=h)
      polygon([[-3.057506,16.708888],[-3.553250,34.685854],[-3.204347,47.940543],[-2.123063,57.100584],[-1.342863,60.341246],[-0.421667,62.793608],[1.725876,59.570553],[3.901054,56.637945],[6.157715,54.561744],[7.333428,54.021657],[8.549705,53.907908],[3.738222,29.682176],[2.234131,20.065375],[2.086113,16.929117],[2.485014,15.306908],[6.235771,22.631579],[10.413383,28.738632],[14.905644,33.677575],[19.600348,37.497912],[24.385287,40.249148],[29.148257,41.980790],[33.777050,42.742344],[38.159460,42.583314],[42.183281,41.553207],[45.736306,39.701527],[48.706329,37.077782],[50.981144,33.731476],[52.448544,29.712115],[52.996323,25.069204],[52.512275,19.852250],[50.884193,14.110758],[54.098436,11.997054],[56.770070,9.379290],[58.873755,6.366319],[60.384149,3.066995],[61.275912,-0.409829],[61.523703,-3.955299],[61.102182,-7.460562],[59.986009,-10.816765],[58.149842,-13.915053],[55.568341,-16.646575],[52.216166,-18.902475],[48.067976,-20.573901],[43.098430,-21.551999],[37.282188,-21.727916],[30.593909,-20.992798],[23.008253,-19.237792],[26.914246,-23.340867],[29.862537,-27.730794],[31.906566,-32.295076],[33.099776,-36.921215],[33.495611,-41.496713],[33.147510,-45.909073],[32.108918,-50.045796],[30.433277,-53.794385],[28.174027,-57.042342],[25.384613,-59.677170],[22.118476,-61.586370],[18.429058,-62.657446],[14.369802,-62.777898],[9.994149,-61.835231],[5.355543,-59.716944],[0.507426,-56.310542],[-3.222046,-59.335469],[-7.094410,-61.387173],[-11.013628,-62.521329],[-14.883659,-62.793608],[-18.608461,-62.259682],[-22.091995,-60.975224],[-25.238221,-58.995907],[-27.951096,-56.377402],[-30.134582,-53.175383],[-31.692638,-49.445520],[-32.529222,-45.243488],[-32.548295,-40.624957],[-31.653817,-35.645601],[-29.749746,-30.361091],[-26.740042,-24.827101],[-22.528664,-19.099302],[-29.897165,-21.451402],[-36.467612,-22.578327],[-42.250192,-22.617615],[-47.255093,-21.706803],[-51.492501,-19.983426],[-54.972604,-17.585022],[-57.705588,-14.649128],[-59.701642,-11.313280],[-60.970951,-7.715014],[-61.523703,-3.991868],[-61.370085,-0.281378],[-60.520285,3.278919],[-58.984488,6.551487],[-56.772883,9.398789],[-53.895657,11.683288],[-50.362995,13.267448],[-52.094096,17.674549],[-52.854572,22.043268],[-52.718478,26.262058],[-51.759873,30.219371],[-50.052814,33.803661],[-47.671358,36.903381],[-44.689561,39.406984],[-41.181482,41.202923],[-37.221177,42.179650],[-32.882703,42.225620],[-28.240118,41.229285],[-23.367479,39.079099],[-18.338842,35.663514],[-13.228266,30.870983],[-8.109806,24.589960],[-3.057521,16.708898]]);
  }
}

module PrintLink1(){
	difference(){
		translate([3.5,0,0]) rotate([0,0,35]) Shamrock(T/SC);
		translate([0,12.5,0]) cylinder(r=4,h=(T*3)/SC,$fn=50,center=true);
		translate([0,-10.75,0]) cylinder(r=4,h=(T*3)/SC,$fn=50,center=true);
		translate([-20,-20,-T/SC]) cube([20,40,(T*4)/SC]);
	}
	rotate([0,60,0]) difference(){
		translate([3.5,0,0]) rotate([0,0,35]) Shamrock(T/SC);
		translate([0,12.5,0]) cylinder(r=4,h=(T*3)/SC,$fn=50,center=true);
		translate([0,-10.75,0]) cylinder(r=4,h=(T*3)/SC,$fn=50,center=true);
		translate([0,-20,-T/SC]) cube([40,40,(T*3)/SC]);
	}

}
module StraightChain(){
	for (i=[1:Links]){
		if (i%2==1){
			translate([0,28*(i-1),0]) PrintLink1();
		} else {
			translate([1,28*(i-1),0]) mirror([1,0,0]) PrintLink1();
		}
	}
}
module LoopChain(){
	for (i=[1:Links]){
		rotate([0,0,i*Seg]) translate([Rad,0,0])
		if (i%2==1){
			PrintLink1();
		} else {
			translate([0,0,0]) mirror([1,0,0]) PrintLink1();
		}
	}
}

Pi=3.1415926535897;
Seg=360/Links;
Rad=(Links*28)/(2*Pi);

SC=Scale/30;
fudge=0.1;
if (Type==0){
	scale([SC,SC,SC]) StraightChain();
} else {
	scale([SC,SC,SC]) LoopChain();
}